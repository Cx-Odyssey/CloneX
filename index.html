<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Empire of Fortune — Telegram Mini App Prototype</title>
  <meta name="description" content="Premium black & gold strategy game — Empire of Fortune. Points convertible to $CX. Telegram Mini App friendly single-file UI prototype."/>
  <style>
    /* ====== Classic Premium Black + Gold Theme ====== */
    :root{
      --bg:#0b0b0b;
      --panel:#0f0f10;
      --muted:#bdb5aa;
      --gold:#c9a24a;
      --accent:#f5e9c8;
      --glass: rgba(255,255,255,0.03);
      --card-shadow: 0 6px 20px rgba(0,0,0,0.6);
      --radius:14px;
      --glass-border: rgba(255,255,255,0.04);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: 'Times New Roman', Georgia, serif; background:linear-gradient(180deg,var(--bg),#070707 60%); color:var(--muted); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      display:flex; align-items:center; justify-content:center; padding:24px;
    }.app {
  width:100%; max-width:1100px; background:linear-gradient(180deg,var(--panel),#0b0b0b); border-radius:20px; padding:20px; box-shadow: var(--card-shadow);
  display:grid; grid-template-columns: 360px 1fr; gap:20px; align-items:start;
}

/* Sidebar */
.sidebar{background:var(--glass); border-radius:16px; padding:18px; border:1px solid var(--glass-border);}
.logo{display:flex; gap:12px; align-items:center}
.mark{width:56px; height:56px; border-radius:12px; display:flex; align-items:center; justify-content:center; background:linear-gradient(135deg,var(--gold),#e6c96f); color:#0b0b0b; font-weight:700; font-size:20px}
h1{margin:0; font-size:18px; color:var(--accent)}
p.small{margin:4px 0 12px 0; font-size:12px; color:var(--muted)}

.stat-grid{display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:12px}
.stat{background:rgba(255,255,255,0.02); padding:12px; border-radius:12px; border:1px solid var(--glass-border)}
.stat .value{font-size:18px; color:var(--gold); font-weight:700}
.stat .label{font-size:11px; color:var(--muted)}

.actions{margin-top:18px; display:flex; gap:10px; flex-direction:column}
.btn{background:transparent; border:1px solid var(--glass-border); padding:12px; border-radius:12px; cursor:pointer; color:var(--accent); font-weight:600}
.btn.primary{background:linear-gradient(90deg,var(--gold),#e6c96f); color:#0b0b0b; border:none}
.footer-note{font-size:12px; color:var(--muted); margin-top:14px}

/* Main area */
.main{display:flex; flex-direction:column; gap:14px}
.panel{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02)); padding:16px; border-radius:12px; border:1px solid var(--glass-border)}

/* Empire board */
.board{display:grid; grid-template-columns: repeat(4,1fr); gap:12px}
.tile{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.03)); padding:14px; border-radius:10px; min-height:110px; display:flex; flex-direction:column; justify-content:space-between; border:1px solid rgba(255,255,255,0.02)}
.tile h3{margin:0; font-size:14px; color:var(--accent)}
.tile .desc{font-size:12px; color:var(--muted)}
.tile .tile-foot{display:flex; justify-content:space-between; align-items:center; margin-top:8px}

/* Trade chamber */
.trade-row{display:flex; gap:8px; align-items:center}
.resource{background:rgba(255,255,255,0.02); padding:8px 10px; border-radius:8px; border:1px solid var(--glass-border)}

/* Modal / Toast */
.toast{position:fixed; right:24px; top:24px; background:#0b0b0b; color:var(--muted); padding:12px 16px; border-radius:10px; border:1px solid var(--glass-border); box-shadow:0 8px 30px rgba(0,0,0,0.5)}

/* Leaderboard */
.leaderboard ol{margin:0; padding:0 0 0 18px}
.leaderboard li{margin:6px 0}

/* Responsive */
@media (max-width:920px){
  .app{grid-template-columns:1fr;}
  .board{grid-template-columns: repeat(2,1fr)}
}

  </style>
</head>
<body>
  <div class="app" role="application">
    <aside class="sidebar panel" aria-label="Sidebar">
      <div class="logo">
        <div class="mark">EF</div>
        <div>
          <h1>Empire of Fortune</h1>
          <p class="small">Classic · Premium · Points → $CX</p>
        </div>
      </div><div class="stat-grid">
    <div class="stat">
      <div class="label">Fortune Points</div>
      <div class="value" id="points">0</div>
    </div>
    <div class="stat">
      <div class="label">Gold</div>
      <div class="value" id="gold">0</div>
    </div>
    <div class="stat">
      <div class="label">Moves Left</div>
      <div class="value" id="moves">0</div>
    </div>
    <div class="stat">
      <div class="label">Influence</div>
      <div class="value" id="influence">0</div>
    </div>
  </div>

  <div class="actions">
    <button class="btn primary" id="scanBtn">Make a Move</button>
    <button class="btn" id="adBtn">Watch Ad (simulate)</button>
    <button class="btn" id="tradeBtn">Open Trade Chamber</button>
    <button class="btn" id="battleBtn">Challenge Rival</button>
  </div>

  <p class="footer-note">Pro-tip: Ads are styled as Royal Patronage — they feel premium and reward your empire.</p>
</aside>

<main class="main">
  <section class="panel">
    <div style="display:flex; justify-content:space-between; align-items:center">
      <div>
        <h2 style="margin:0; color:var(--accent)">Empire Board</h2>
        <p class="small">Use daily moves to expand, trade, or challenge rivals. Build a legacy.</p>
      </div>
      <div style="text-align:right">
        <div style="font-size:12px; color:var(--muted)">Conversion Rate</div>
        <div style="font-weight:700; color:var(--gold)">$CX per 1,000 FP</div>
      </div>
    </div>

    <div class="board" id="board">
      <!-- tiles injected by JS -->
    </div>
  </section>

  <section class="panel" id="tradePanel" style="display:none">
    <h3 style="margin-top:0; color:var(--accent)">Trade Chamber</h3>
    <div style="display:flex; gap:12px; align-items:center; margin-bottom:12px">
      <div class="resource">Gold: <span id="tradeGold">0</span></div>
      <div class="resource">Grain: <span id="grain">0</span></div>
      <div class="resource">Fortune Points: <span id="tradePoints">0</span></div>
    </div>
    <div style="display:flex; gap:8px; align-items:center">
      <select id="tradeAction">
        <option value="gold->fp">Convert Gold → Fortune Points (100g → 10FP)</option>
        <option value="fp->influence">Convert FP → Influence (50FP → 1 Influence)</option>
        <option value="grain->gold">Sell Grain → Gold (10g → 50 Gold)</option>
      </select>
      <input type="number" id="tradeAmount" placeholder="Amount" style="padding:8px; border-radius:8px; border:1px solid var(--glass-border); background:transparent; color:var(--muted)"/>
      <button class="btn primary" id="executeTrade">Execute</button>
      <button class="btn" id="closeTrade">Close</button>
    </div>
  </section>

  <section class="panel leaderboard">
    <h3 style="margin-top:0; color:var(--accent)">Leaderboards</h3>
    <ol id="leaders">
      <!-- leaderboard entries -->
    </ol>
  </section>
</main>

  </div>  <div id="toast" class="toast" style="display:none"></div>  <script>
    // ====== Empire of Fortune - single-file prototype logic ======
    // Persistence & initial state
    const DEFAULT = {
      points: 120, // starting Fortune Points to show feel
      gold: 250,
      moves: 3,
      influence: 1,
      grain: 30,
      board: [],
      leaders: [
        {name:'Lady Armand', pts:1200}, {name:'Duc Valen', pts:980}, {name:'You', pts:120}
      ]
    };

    function load(){
      const raw = localStorage.getItem('empire_state');
      if(raw) return JSON.parse(raw);
      // generate default tiles
      DEFAULT.board = generateBoardTiles();
      return DEFAULT;
    }

    function save(){ localStorage.setItem('empire_state', JSON.stringify(state)); }

    function toast(msg, time=2500){
      const t = document.getElementById('toast'); t.innerText = msg; t.style.display='block';
      setTimeout(()=> t.style.display='none', time);
    }

    function generateBoardTiles(){
      const names = ['Castle Ross','Merchant Quay','Verdant Fields','Old Keep','Silk District','Granary','Artisan Row','High Bastion'];
      return names.map((n,i)=>({id:i, name:n, level:1, type: (i%3===0?'fort':'econ'), desc: i%3===0? 'Fortify to earn banners':'Trade hub — steady gold'}));
    }

    let state = load();

    // ====== Render UI ======
    const el = id=>document.getElementById(id);
    function renderStats(){ el('points').innerText = state.points; el('gold').innerText = state.gold; el('moves').innerText = state.moves; el('influence').innerText = state.influence; el('tradeGold').innerText = state.gold; el('grain').innerText = state.grain; el('tradePoints').innerText = state.points; }

    function renderBoard(){
      const board = el('board'); board.innerHTML = '';
      state.board.forEach(tile=>{
        const card = document.createElement('div'); card.className='tile';
        card.innerHTML = `<div>
            <h3>${tile.name} <small style="font-size:11px;color:var(--muted);">(Lv ${tile.level})</small></h3>
            <p class="desc">${tile.desc}</p>
          </div>
          <div class="tile-foot">
            <div style="font-size:13px;color:var(--gold);">Reward: ${tile.type==='fort'? 'Banners':'Gold'}</div>
            <div>
              <button class="btn" data-action="inspect" data-id="${tile.id}">Inspect</button>
              <button class="btn primary" data-action="act" data-id="${tile.id}">Use Move</button>
            </div>
          </div>`;
        board.appendChild(card);
      });
    }

    function renderLeaders(){
      const list = el('leaders'); list.innerHTML='';
      state.leaders.sort((a,b)=>b.pts-a.pts).slice(0,10).forEach(l=>{
        const li = document.createElement('li'); li.innerHTML = `<strong style="color:var(--gold)">${l.name}</strong> — <span style="color:var(--muted)">${l.pts} FP</span>`;
        list.appendChild(li);
      });
    }

    // ====== Core Actions ======
    function makeMove(tileId){
      if(state.moves<=0){ toast('No moves left — watch a patron ad to gain more.'); return; }
      state.moves -= 1;
      const tile = state.board.find(t=>t.id==tileId);
      // random outcome influenced by tile type & influence
      const roll = Math.random() + state.influence*0.02;
      if(roll > 0.6){
        // success
        const goldGain = tile.type==='fort' ? 40 + tile.level*10 : 20 + tile.level*8;
        const fpGain = Math.round((10 + tile.level*3) * (1 + state.influence*0.05));
        state.gold += goldGain; state.points += fpGain;
        // small chance to gain grain
        if(Math.random() > 0.8) state.grain += 5;
        toast(`Move success: +${goldGain} Gold, +${fpGain} FP`);
      } else {
        // failure
        const loss = Math.round(5 + tile.level*2);
        state.gold = Math.max(0, state.gold - loss);
        toast(`Move failed — you lost ${loss} Gold`);
      }
      // slight chance to level tile
      if(Math.random()>0.85){ tile.level += 1; tile.desc = tile.desc + ' (prospered)'; }
      save(); renderAll();
    }

    function simulateAd(){
      // emulate ad watch flow — reward feel: royal patronage
      toast('Royal Patronage activated — receiving gifts...');
      // reward bundle
      const gold = 80 + Math.floor(Math.random()*60);
      const fp = 15 + Math.floor(Math.random()*10);
      state.gold += gold; state.points += fp; state.moves += 1;
      save(); renderAll();
    }

    function openTrade(){ el('tradePanel').style.display='block'; }
    function closeTrade(){ el('tradePanel').style.display='none'; }

    function executeTrade(){
      const action = el('tradeAction').value; const amt = Number(el('tradeAmount').value);
      if(!amt || amt<=0){ toast('Enter a valid amount'); return; }
      if(action==='gold->fp'){
        const needed = amt * 100; if(state.gold < needed){ toast('Not enough gold'); return; }
        state.gold -= needed; const gain = amt * 10; state.points += gain; toast(`${gain} FP acquired`);
      } else if(action==='fp->influence'){
        const needed = amt * 50; if(state.points < needed){ toast('Not enough Fortune Points'); return; }
        state.points -= needed; state.influence += amt; toast(`Influence +${amt}`);
      } else if(action==='grain->gold'){
        const needed = amt * 10; if(state.grain < needed){ toast('Not enough grain'); return; }
        state.grain -= needed; const gain = amt * 50; state.gold += gain; toast(`${gain} Gold acquired`);
      }
      save(); renderAll();
    }

    function challengeRival(){
      // lightweight turn-based chess-like duel
      const rivalPower = 50 + Math.floor(Math.random()*120);
      const yourPower = 40 + Math.floor(state.influence*15 + Math.random()*80);
      const fpStake = 30; if(state.points < 20){ toast('Not enough FP to stake for a duel (20 FP minimum)'); return; }
      state.points = Math.max(0, state.points - fpStake);
      if(yourPower > rivalPower){
        const rewardFP = 60 + Math.floor(Math.random()*40);
        const rewardGold = 120 + Math.floor(Math.random()*80);
        state.points += rewardFP; state.gold += rewardGold;
        toast(`Victory! +${rewardFP} FP, +${rewardGold} Gold`);
        // update leaderboard — you gain standing
        const you = state.leaders.find(l=>l.name==='You'); if(you) you.pts += rewardFP; else state.leaders.push({name:'You', pts:rewardFP});
      } else {
        toast('You were outmaneuvered — retreat and rebuild.');
      }
      save(); renderAll();
    }

    // ====== Event listeners & wiring ======
    document.addEventListener('click', (e)=>{
      const act = e.target.getAttribute('data-action'); const id = e.target.getAttribute('data-id');
      if(act==='act') makeMove(Number(id));
      if(act==='inspect') {
        const tile = state.board.find(t=>t.id==id); toast(`${tile.name}: Lv ${tile.level} — ${tile.desc}`);
      }
    });

    el('scanBtn').addEventListener('click', ()=>{
      // pick a random tile to act on for simplicity
      const tid = state.board[Math.floor(Math.random()*state.board.length)].id; makeMove(tid);
    });
    el('adBtn').addEventListener('click', ()=> simulateAd());
    el('tradeBtn').addEventListener('click', ()=> openTrade());
    el('closeTrade').addEventListener('click', ()=> closeTrade());
    el('executeTrade').addEventListener('click', ()=> executeTrade());
    el('battleBtn').addEventListener('click', ()=> challengeRival());

    // Quick restore / reset for testing (double-click logo to reset)
    document.querySelector('.mark').addEventListener('dblclick', ()=>{ if(confirm('Reset progress?')){ localStorage.removeItem('empire_state'); state = load(); save(); renderAll(); }});

    // initial render
    function renderAll(){ renderStats(); renderBoard(); renderLeaders(); }
    renderAll(); save();

    // ====== Notes for developers ======
    /*
      - This is a single-file prototype suitable for Telegram Mini App wrapped in WebView.
      - Replace simulateAd() with a real rewardedAd flow from your ad provider.
      - Hook Telegram WebApp initialization (e.g., Telegram.WebApp.init()) and use user data for auth.
      - Persist server-side for multiplayer/leaderboards and token economics (FP -> $CX) conversion.
      - Consider adding animations, sound, and premium purchases (cosmetic banners) later.
    */
  </script></body>
</html>
